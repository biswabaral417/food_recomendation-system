"use strict";(self.webpackChunkfoodrecomendation=self.webpackChunkfoodrecomendation||[]).push([[926],{926:function(e,n,t){t.r(n),t.d(n,{default:function(){return p}});var r=t(165),s=t(861),i=t(439),a=t(791),c=t(433),o=t(253),d=t(184);function u(e){var n=e.pendingAdmins,t=e.setPendingAdmins,i=e.setExistingAdmins,u=e.existingAdmins,l=(0,a.useContext)(o.Z).mode,p=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(s){var a,o,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/admins/addtoadmins",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});case 2:return a=e.sent,e.next=5,a.json();case 5:o=e.sent,422!==a.status&&o||window.alert(o.error),404===a.status?window.alert(o.error):200===a.status?(window.alert(o.success),d=n.filter((function(e){return e._id!==s._id})),t(d),i([].concat((0,c.Z)(u),[s]))):window.alert("connection error");case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(s){var i,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/admins/deleteReq",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});case 2:return i=e.sent,e.next=5,i.json();case 5:a=e.sent,422!==i.status&&a||window.alert(a.error),404===i.status?window.alert(a.error):200===i.status?(window.alert(a.success),c=n.filter((function(e){return e._id!==s._id})),t(c)):window.alert("connection error");case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,d.jsx)(d.Fragment,{children:n.map((function(e,n){return(0,d.jsxs)("div",{className:" p-1 border fs-3 border-dark-subtle text-".concat("dark"===l?"white":"black"," px-2 d-flex justify-content-between align-items-center"),children:[e.userName.toUpperCase(),(0,d.jsxs)("div",{className:"d-flex gap-3",children:[(0,d.jsx)("button",{onClick:function(){return f(e)},className:"btn btn-primary px-4 py-1 fw-semibold",children:"decline/delete"}),(0,d.jsx)("button",{onClick:function(){return p(e)},className:"btn btn-primary px-4 py-1 fw-semibold",children:"approve"})]})]},"".concat(n))}))})}function l(e){var n=e.existingAdmins,t=e.setExistingAdmins,i=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(s){var i,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/admins/removeAdmin",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});case 2:return i=e.sent,e.next=5,i.json();case 5:a=e.sent,422!==i.status&&a||window.alert(a.error),404===i.status?window.alert(a.error):200===i.status?(window.alert(a.success),c=n.filter((function(e){return e._id!==s._id})),t(c)):window.alert("connection error");case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),c=(0,a.useContext)(o.Z).mode;return(0,d.jsx)(d.Fragment,{children:n.map((function(e,n){return(0,d.jsxs)("div",{className:" p-1 border border-dark-subtle text-".concat("dark"===c?"white":"black"," px-2 d-flex justify-content-between align-items-center"),children:[e.userName.toUpperCase(),(0,d.jsx)("div",{children:(0,d.jsx)("button",{onClick:function(){return i(e)},className:"btn btn-primary px-4 py-1 fw-semibold",children:"Remove"})})]},"".concat(n))}))})}function p(){var e=(0,a.useContext)(o.Z).mode,n=(0,a.useState)(!1),t=(0,i.Z)(n,2),c=t[0],p=t[1],f=(0,a.useState)(!0),m=(0,i.Z)(f,2),x=m[0],h=m[1],w=(0,a.useState)(!1),b=(0,i.Z)(w,2),v=b[0],g=b[1],j=function(e){"pendingAdmins"===e.target.id?(h(!0),p(!1)):(p(!0),h(!1))},y=(0,a.useState)([]),k=(0,i.Z)(y,2),C=k[0],A=k[1],Z=(0,a.useState)([]),N=(0,i.Z)(Z,2),S=N[0],D=N[1];(0,a.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n,t,s,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/Admins",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});case 3:return n=e.sent,e.next=6,n.json();case 6:if(t=e.sent,200===n.status){e.next=12;break}throw new Error(n.error);case 12:t&&(s=t.filter((function(e){return"true"===e.isAdmin&&!e.isSuperUser})),i=t.filter((function(e){return"pending"===e.isAdmin&&!e.isSuperUser})),A(s),D(i));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var T=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/Admins/super/Issuperuser",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});case 3:return n=e.sent,e.next=6,n.json();case 6:t=e.sent,g(t.isSuperUser),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){T()}),[]),v?(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{children:"AdminManagement"}),(0,d.jsxs)("div",{style:{display:"flex"},children:[(0,d.jsx)("button",{id:"ManageAdmins",className:"p-2 bg-".concat(e," text-").concat("dark"===e?"white":"black"," ").concat(c?"selected":""),onClick:j,style:{border:"1px solid #DCDCDC",borderBottom:c?"none":"1px solid #DCDCDC",borderTopLeftRadius:"15px"},children:"Manage Admins"}),(0,d.jsx)("button",{id:"pendingAdmins",className:"p-2 bg-".concat(e," text-").concat("dark"===e?"white":"black"," ").concat(x?"selected":""),onClick:j,style:{border:"1px solid #DCDCDC",borderBottom:x?"none":"1px solid  #DCDCDC",borderTopRightRadius:"15px"},children:"Pending Admin Requests"})]}),(0,d.jsx)("div",{className:"p-3 bg-".concat(e,"   pendingAdmins ").concat(x?"active":""),style:{display:x?"block":"none"},children:(0,d.jsx)(u,{pendingAdmins:S,setPendingAdmins:D,setExistingAdmins:A,existingAdmins:C})}),(0,d.jsx)("div",{className:"p-3 bg-".concat(e," ManageAdmins ").concat(c?"active":""),style:{display:c?"block":"none"},children:(0,d.jsx)(l,{existingAdmins:C,setExistingAdmins:A})})]}):null}}}]);
//# sourceMappingURL=926.aa3e539a.chunk.js.map