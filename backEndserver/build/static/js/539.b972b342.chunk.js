"use strict";(self.webpackChunkfoodrecomendation=self.webpackChunkfoodrecomendation||[]).push([[539],{539:function(e,r,n){n.r(r),n.d(r,{default:function(){return u}});var s=n(762),t=n(165),c=n(861),a=n(439),i=n(791),d=n(253),o=n(184);function l(e){var r=e.buttons,n=e.order,s=(0,i.useState)(0),t=(0,a.Z)(s,2),c=t[0],l=t[1];(0,i.useEffect)((function(){if(n.items){var e=n.items.reduce((function(e,r){return r.food&&r.food.itemPrice?e+r.count*r.food.itemPrice:e}),0);l(e)}}),[n.items]);var u=(0,i.useContext)(d.Z).mode;return(0,o.jsxs)("div",{className:"border d-flex  justify-content-between p-2 bg-".concat(u),children:[(0,o.jsx)("div",{className:"d-flex",children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"d-flex flex-wrap mb-1",children:[(0,o.jsxs)("span",{className:"border px-2",style:{width:"200px"},children:[" ",(0,o.jsx)("p",{children:"ordered by:"}),(0,o.jsx)("h5",{children:n.user.userName})]}),(0,o.jsxs)("span",{className:"border px-2",style:{width:"240px"},children:[" ",(0,o.jsx)("p",{children:"Email :"}),(0,o.jsx)("h6",{children:n.user.userEmail})]}),(0,o.jsxs)("span",{className:"border px-2",style:{width:"130px"},children:[(0,o.jsx)("p",{children:"phone :"}),(0,o.jsx)("h5",{children:n.user.userPhone})]}),(0,o.jsxs)("div",{className:"border px-2",children:[(0,o.jsxs)("span",{children:[(0,o.jsx)("p",{children:"ordered at :"}),(0,o.jsx)("h6",{children:n.OrderedTime})]}),(0,o.jsxs)("span",{children:[(0,o.jsx)("p",{children:"Location :"}),(0,o.jsxs)("h4",{children:[n.user.userLocation," "]})]})]}),(0,o.jsxs)("span",{className:"border px-2",style:{width:"130px"},children:[" ",(0,o.jsx)("p",{children:"state :"})," ",(0,o.jsx)("h4",{children:n.state})]})]}),(0,o.jsxs)("table",{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsxs)("td",{className:"border p-1",children:[" ",(0,o.jsx)("p",{children:"S/N "})]}),(0,o.jsxs)("td",{className:"border p-1",children:[" ",(0,o.jsx)("p",{children:"Items"})]}),(0,o.jsx)("td",{className:"border p-1",children:(0,o.jsx)("p",{children:"Rate"})}),(0,o.jsx)("td",{className:"border p-1",children:(0,o.jsx)("p",{children:"Count"})}),(0,o.jsx)("td",{className:"border p-1",children:(0,o.jsx)("p",{children:"total"})})]})}),(0,o.jsx)("tbody",{children:n.items.map((function(e,r){return null!==e.food?(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"border px-1",children:r+1}),(0,o.jsx)("td",{className:"border px-1",children:e.food.itemName}),(0,o.jsxs)("td",{className:"border px-1",children:[e.food.itemPrice," RS"]}),(0,o.jsx)("td",{className:"border px-1",children:e.count}),(0,o.jsxs)("td",{className:"border px-1",children:[e.count*e.food.itemPrice," RS"]})]},e.food._id):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{children:"loading..."})},r)}))})]})]})}),(0,o.jsxs)("div",{className:"my-auto",children:[(0,o.jsxs)("h4",{children:["Total Cost : ",c," RS"]}),"ordered"===n.state?r.map((function(e,r){return(0,o.jsx)("button",{className:"btn btn-primary my-1",onClick:function(){return e.func(n)},children:e.btntxt},r)})):""]})]})}function u(){var e=(0,i.useState)([]),r=(0,a.Z)(e,2),n=r[0],u=r[1],h=(0,i.useContext)(d.Z).searchStr;(0,i.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(){var r,n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/admins/getOrders",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});case 3:return r=e.sent,e.next=6,r.json();case 6:if(n=e.sent,200===r.status){e.next=12;break}throw new Error(r.error);case 12:n&&u(n);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var x=(0,i.useState)(n),p=(0,a.Z)(x,2),f=p[0],j=p[1];(0,i.useEffect)((function(){var e=function e(r,n){for(var t=0,c=Object.values(r);t<c.length;t++){var a=c[t];if("string"===typeof a&&a.toLowerCase().includes(n))return!0;if(Array.isArray(a)){var i,d=(0,s.Z)(a);try{for(d.s();!(i=d.n()).done;){if(e(i.value,n))return!0}}catch(o){d.e(o)}finally{d.f()}}else if("object"===typeof a&&null!==a&&e(a,n))return!0}return!1};n.length>0&&function(r){var s=r.toLowerCase(),t=n.filter((function(r){return e(r,s)}));j(t)}(h)}),[h,n]);var m=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/admins/ApproveOrders",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});case 3:e.sent&&console.log(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}(),b=function(e){};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"asd",children:f.map((function(e,r){return(0,o.jsx)(l,{order:e,buttons:[{func:m,btntxt:"approve order"},{func:b,btntxt:"decline order"}]},r)}))})})}}}]);
//# sourceMappingURL=539.b972b342.chunk.js.map